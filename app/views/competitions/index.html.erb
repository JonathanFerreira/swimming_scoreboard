<% content_for :title, "Competitions" %>

<div class="mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10">
  <div class="mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
    <h2 class="text-title-md2 font-bold text-black dark:text-white">
      Competitions
    </h2>
    <nav>
      <ol class="flex items-center gap-2">
        <li>
          <a class="font-medium" href="/admin">Dashboard /</a>
        </li>
        <li class="font-medium text-primary">Competitions</li>
      </ol>
    </nav>
  </div>

  <% if notice.present? %>
    <div class="mb-6 rounded-sm border border-success bg-success/10 px-4 py-3 text-success">
      <%= notice %>
    </div>
  <% end %>

  <div class="rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1">
    <div class="flex flex-col">
      <div class="grid grid-cols-6 rounded-sm bg-gray-2 dark:bg-meta-4 sm:grid-cols-8">
        <div class="p-2.5 xl:p-5">
          <h5 class="text-sm font-medium uppercase xsm:text-base">Name</h5>
        </div>
        <div class="p-2.5 text-center xl:p-5">
          <h5 class="text-sm font-medium uppercase xsm:text-base">Start Date</h5>
        </div>
        <div class="p-2.5 text-center xl:p-5">
          <h5 class="text-sm font-medium uppercase xsm:text-base">End Date</h5>
        </div>
        <div class="hidden p-2.5 text-center sm:block xl:p-5">
          <h5 class="text-sm font-medium uppercase xsm:text-base">Status</h5>
        </div>
        <div class="hidden p-2.5 text-center sm:block xl:p-5">
          <h5 class="text-sm font-medium uppercase xsm:text-base">Created</h5>
        </div>
        <div class="p-2.5 text-center xl:p-5">
          <h5 class="text-sm font-medium uppercase xsm:text-base">Actions</h5>
        </div>
      </div>

      <% if @competitions.any? %>
        <% @competitions.each do |competition| %>
          <div class="grid grid-cols-6 border-b border-stroke dark:border-strokedark sm:grid-cols-8">
            <div class="flex items-center gap-3 p-2.5 xl:p-5">
              <div class="flex-shrink-0">
                <div class="flex h-12.5 w-12.5 items-center justify-center rounded-full bg-meta-2 dark:bg-meta-4">
                  <svg class="fill-current text-meta-1" width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 0.5625C4.17188 0.5625 0.375 4.35938 0.375 9.1875C0.375 14.0156 4.17188 17.8125 9 17.8125C13.8281 17.8125 17.625 14.0156 17.625 9.1875C17.625 4.35938 13.8281 0.5625 9 0.5625ZM9 16.3125C5.0625 16.3125 1.875 13.125 1.875 9.1875C1.875 5.25 5.0625 2.0625 9 2.0625C12.9375 2.0625 16.125 5.25 16.125 9.1875C16.125 13.125 12.9375 16.3125 9 16.3125Z" fill=""></path>
                    <path d="M12.375 8.4375H9.5625V5.625C9.5625 5.25 9.1875 4.875 8.8125 4.875C8.4375 4.875 8.0625 5.25 8.0625 5.625V8.4375H5.25C4.875 8.4375 4.5 8.8125 4.5 9.1875C4.5 9.5625 4.875 9.9375 5.25 9.9375H8.0625V12.75C8.0625 13.125 8.4375 13.5 8.8125 13.5C9.1875 13.5 9.5625 13.125 9.5625 12.75V9.9375H12.375C12.75 9.9375 13.125 9.5625 13.125 9.1875C13.125 8.8125 12.75 8.4375 12.375 8.4375Z" fill=""></path>
                  </svg>
                </div>
              </div>
              <p class="hidden text-black dark:text-white sm:block">
                <%= competition.name %>
              </p>
            </div>

            <div class="flex items-center justify-center p-2.5 xl:p-5">
              <p class="text-black dark:text-white">
                <%= competition.event_initial_date&.strftime("%b %d, %Y") %>
              </p>
            </div>

            <div class="flex items-center justify-center p-2.5 xl:p-5">
              <p class="text-black dark:text-white">
                <%= competition.event_final_date&.strftime("%b %d, %Y") %>
              </p>
            </div>

            <div class="hidden items-center justify-center p-2.5 sm:flex xl:p-5">
              <% if competition.event_final_date && competition.event_final_date < Date.current %>
                <span class="inline-flex rounded-full bg-opacity-10 py-1 px-3 text-sm font-medium bg-danger text-danger">
                  Completed
                </span>
              <% elsif competition.event_initial_date && competition.event_initial_date <= Date.current %>
                <span class="inline-flex rounded-full bg-opacity-10 py-1 px-3 text-sm font-medium bg-success text-success">
                  Active
                </span>
              <% else %>
                <span class="inline-flex rounded-full bg-opacity-10 py-1 px-3 text-sm font-medium bg-warning text-warning">
                  Upcoming
                </span>
              <% end %>
            </div>

            <div class="hidden items-center justify-center p-2.5 sm:flex xl:p-5">
              <p class="text-black dark:text-white">
                <%= competition.created_at.strftime("%b %d, %Y") %>
              </p>
            </div>

            <div class="flex items-center justify-center p-2.5 xl:p-5">
              <div class="flex items-center space-x-3.5">
                <%= link_to admin_competition_path(competition), class: "hover:text-primary" do %>
                  <svg class="fill-current" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.99981 14.8219C3.43106 14.8219 0.674805 9.50624 0.562305 9.28124C0.47793 9.11249 0.47793 8.88749 0.562305 8.71874C0.674805 8.49374 3.43106 3.17812 8.99981 3.17812C14.5686 3.17812 17.3248 8.49374 17.4373 8.71874C17.5217 8.88749 17.5217 9.11249 17.4373 9.28124C17.3248 9.50624 14.5686 14.8219 8.99981 14.8219ZM1.85605 9.00000C2.4748 10.4719 4.89356 13.5562 8.99981 13.5562C13.1061 13.5562 15.5248 10.4719 16.1436 9.00000C15.5248 7.52812 13.1061 4.44374 8.99981 4.44374C4.89356 4.44374 2.4748 7.52812 1.85605 9.00000Z" fill=""></path>
                    <path d="M9 11.3906C7.67812 11.3906 6.60938 10.3219 6.60938 9C6.60938 7.67813 7.67812 6.60938 9 6.60938C10.3219 6.60938 11.3906 7.67813 11.3906 9C11.3906 10.3219 10.3219 11.3906 9 11.3906ZM9 7.875C8.38125 7.875 7.875 8.38125 7.875 9C7.875 9.61875 8.38125 10.125 9 10.125C9.61875 10.125 10.125 9.61875 10.125 9C10.125 8.38125 9.61875 7.875 9 7.875Z" fill=""></path>
                  </svg>
                <% end %>
                <%= link_to edit_admin_competition_path(competition), class: "hover:text-primary" do %>
                  <svg class="fill-current" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.99981 14.8219C3.43106 14.8219 0.674805 9.50624 0.562305 9.28124C0.47793 9.11249 0.47793 8.88749 0.562305 8.71874C0.674805 8.49374 3.43106 3.17812 8.99981 3.17812C14.5686 3.17812 17.3248 8.49374 17.4373 8.71874C17.5217 8.88749 17.5217 9.11249 17.4373 9.28124C17.3248 9.50624 14.5686 14.8219 8.99981 14.8219ZM1.85605 9.00000C2.4748 10.4719 4.89356 13.5562 8.99981 13.5562C13.1061 13.5562 15.5248 10.4719 16.1436 9.00000C15.5248 7.52812 13.1061 4.44374 8.99981 4.44374C4.89356 4.44374 2.4748 7.52812 1.85605 9.00000Z" fill=""></path>
                    <path d="M9 11.3906C7.67812 11.3906 6.60938 10.3219 6.60938 9C6.60938 7.67813 7.67812 6.60938 9 6.60938C10.3219 6.60938 11.3906 7.67813 11.3906 9C11.3906 10.3219 10.3219 11.3906 9 11.3906ZM9 7.875C8.38125 7.875 7.875 8.38125 7.875 9C7.875 9.61875 8.38125 10.125 9 10.125C9.61875 10.125 10.125 9.61875 10.125 9C10.125 8.38125 9.61875 7.875 9 7.875Z" fill=""></path>
                  </svg>
                <% end %>
                <%= button_to admin_competition_path(competition), method: :delete, class: "hover:text-danger", data: { turbo_confirm: "Are you sure?" } do %>
                  <svg class="fill-current" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M13.7535 2.47502H11.5879V1.9969C11.5879 1.15315 10.9129 0.478149 10.0691 0.478149H7.90352C7.05977 0.478149 6.38477 1.15315 6.38477 1.9969V2.47502H4.21914C3.40352 2.47502 2.72852 3.15002 2.72852 3.96565V4.8094C2.72852 5.42815 3.09414 5.9344 3.62852 6.1594L4.07852 15.4688C4.13477 16.6219 5.09102 17.5219 6.24414 17.5219H11.7004C12.8535 17.5219 13.8098 16.6219 13.866 15.4688L14.3441 6.13127C14.8785 5.90627 15.2441 5.3719 15.2441 4.78127V3.93752C15.2441 3.15002 14.5691 2.47502 13.7535 2.47502ZM7.67852 1.9969C7.67852 1.85627 7.79102 1.74377 7.93164 1.74377H10.0973C10.2379 1.74377 10.3504 1.85627 10.3504 1.9969V2.47502H7.70664V1.9969H7.67852ZM4.02227 3.96565C4.02227 3.85315 4.10664 3.74065 4.24727 3.74065H13.7535C13.866 3.74065 13.9785 3.82502 13.9785 3.96565V4.8094C13.9785 4.9219 13.8941 5.0344 13.7535 5.0344H4.24727C4.13477 5.0344 4.02227 4.95002 4.02227 4.8094V3.96565ZM11.7285 16.2563H6.27227C5.79414 16.2563 5.40039 15.8906 5.37227 15.3844L4.95039 6.2719H13.0785L12.6566 15.3844C12.6004 15.8625 12.2066 16.2563 11.7285 16.2563Z" fill=""></path>
                    <path d="M10.9973 8.0625C10.9973 7.94063 10.9129 7.85625 10.791 7.85625H9.60352C9.48164 7.85625 9.39727 7.94063 9.39727 8.0625V13.5C9.39727 13.6219 9.48164 13.7063 9.60352 13.7063H10.791C10.9129 13.7063 10.9973 13.6219 10.9973 13.5V8.0625Z" fill=""></path>
                    <path d="M7.40234 8.0625C7.40234 7.94063 7.31797 7.85625 7.19609 7.85625H6.00859C5.88672 7.85625 5.80234 7.94063 5.80234 8.0625V13.5C5.80234 13.6219 5.88672 13.7063 6.00859 13.7063H7.19609C7.31797 13.7063 7.40234 13.6219 7.40234 13.5V8.0625Z" fill=""></path>
                  </svg>
                <% end %>
              </div>
            </div>
          </div>
        <% end %>
      <% else %>
        <div class="grid grid-cols-6 border-b border-stroke dark:border-strokedark sm:grid-cols-8">
          <div class="col-span-6 sm:col-span-8 flex items-center justify-center p-2.5 xl:p-5">
            <p class="text-black dark:text-white">No competitions found.</p>
          </div>
        </div>
      <% end %>
    </div>
  </div>

  <div class="mt-6 flex justify-end">
    <%= link_to new_admin_competition_path, class: "inline-flex items-center justify-center rounded-md bg-primary py-2 px-10 text-center font-medium text-white hover:bg-opacity-90 lg:px-8 xl:px-10" do %>
      <svg class="mr-2 fill-current" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M15 7H9V1C9 0.4 8.6 0 8 0C7.4 0 7 0.4 7 1V7H1C0.4 7 0 7.4 0 8C0 8.6 0.4 9 1 9H7V15C7 15.6 7.4 16 8 16C8.6 16 9 15.6 9 15V9H15C15.6 9 16 8.6 16 8C16 7.4 15.6 7 15 7Z" fill=""></path>
      </svg>
      Add Competition
    <% end %>
  </div>
</div>
